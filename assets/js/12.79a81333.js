(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{569:function(e,t,a){},587:function(e,t,a){"use strict";a.r(t);a(398);var n={name:"ColumnRender",functional:!0,props:{scope:Object,render:Function,value:String|Boolean|Number},render:function(e,t){var a=t.props;return a.render?a.render(e,a.scope):e("span",a.value)}},r=a(29),i=Object(r.a)(n,void 0,void 0,!1,null,null,null);t.default=i.exports},645:function(e,t,a){"use strict";a(569)},675:function(e,t,a){"use strict";a.r(t);a(625),a(78),a(626),a(122);var n=a(62),r=a(628),i=a.n(r),u={components:{ColumnRender:a(587).default},props:{url:String,columns:Array,table:Object,emptyText:{type:String,default:"暂无数据"},filterEmptyText:{type:String,default:"暂未搜索到数据"},pagination:{type:Object,default:function(){}},filters:Array},data:function(){return{dataSource:[],dataTotal:0,fetching:!0,queryParams:{page:1,pageSize:10}}},computed:{paginationProps:function(){return Object.assign({},{pageSizes:[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",background:!0,show:!0},this.pagination)},inFilter:function(){var e=JSON.parse(JSON.stringify(this.queryParams));return delete e.page,delete e.pageSize,-1!==Object.values(e).findIndex((function(e){return!!e}))}},created:function(){var e=this;this.filters.map((function(t){t.hasOwnProperty("defaultValue")?e.$set(e.queryParams,t.field,t.defaultValue):e.$set(e.queryParams,t.field,"")})),this.getData()},methods:{getData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetching=!0,i.a.get(e.url,{params:e.queryParams}).then((function(t){e.dataSource=t.data.data.list,e.dataTotal=t.data.data.total,e.fetching=!1})).catch((function(){e.fetching=!1}));case 2:case"end":return t.stop()}}),t)})))()},pageChange:function(){this.getData()},pageSizeChange:function(){this.queryParams.page=1,this.getData()}}},l=(a(645),a(29)),s=Object(l.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"yi-filter"},e._l(e.filters,(function(t,n){return a("div",{key:n,staticClass:"yi-filter__item"},["select"===t.type?a("el-select",e._b({attrs:{clearable:""},on:{change:e.getData},model:{value:e.queryParams[t.field],callback:function(a){e.$set(e.queryParams,t.field,a)},expression:"queryParams[item.field]"}},"el-select",t.props,!1),e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._v(" "),"input"===t.type?a("el-input",e._b({attrs:{clearable:""},on:{change:e.getData},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData(t)}},model:{value:e.queryParams[t.field],callback:function(a){e.$set(e.queryParams,t.field,a)},expression:"queryParams[item.field]"}},"el-input",t.props,!1)):e._e()],1)})),0),e._v(" "),a("el-table",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.fetching,expression:"fetching"}],attrs:{data:e.dataSource}},"el-table",e.table,!1),[e._l(e.columns,(function(t,n){return a("el-table-column",e._b({key:n,scopedSlots:e._u([{key:"default",fn:function(e){return[a("ColumnRender",{attrs:{scope:e,render:t.render,value:e.row[t.prop]}})]}}],null,!0)},"el-table-column",t,!1))})),e._v(" "),a("div",{attrs:{slot:"empty"},slot:"empty"},[e.fetching?e._e():a("p",[e._v(e._s(e.inFilter?e.filterEmptyText:e.emptyText))])])],2),e._v(" "),e.dataTotal>0&&e.paginationProps.show?a("el-pagination",e._b({staticClass:"yi-pagination",attrs:{total:e.dataTotal,"current-page":e.queryParams.page,"page-size":e.queryParams.pageSize},on:{"current-change":e.pageChange,"size-change":e.pageSizeChange,"update:currentPage":function(t){return e.$set(e.queryParams,"page",t)},"update:current-page":function(t){return e.$set(e.queryParams,"page",t)},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)}}},"el-pagination",e.paginationProps,!1)):e._e()],1)}),[],!1,null,null,null);t.default=s.exports}}]);